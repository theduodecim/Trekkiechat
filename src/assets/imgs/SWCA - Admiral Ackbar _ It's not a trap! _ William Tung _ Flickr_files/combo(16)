YUI.add("hermes-template-notification-context-menu",function(t,e){var n=t.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,a){var s=null!=e?e:{},o=n.helperMissing,l=t.escapeExpression;return'<div class="notification-context-menu">\n\t\n\t<ul class="notification-context-list">\n\t\t<li class="notification-context-option turn-off-object-option">'+l((n.intlMessage||e&&e.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"notifications.NOTIF_TURN_OFF_OBJECT"},data:a}))+'</li>\n\t\t<li class="notification-context-option turn-on-object-option hidden">'+l((n.intlMessage||e&&e.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"notifications.NOTIF_TURN_ON_OBJECT"},data:a}))+"</li>\n\t</ul>\n\n</div>"},useData:!0}),i={};t.Array.each([],function(e){var n=t.Template.get("hermes/"+e);n&&(i[e]=n)}),t.Template.register("hermes/notification-context-menu",function(e,a){return a=a||{},a.partials=a.partials?t.merge(i,a.partials):i,n(e,a)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-notification",function(e,n){var a=e.Template.Handlebars.revive({1:function(e,n,a,t,l){return" has-menu"},3:function(e,n,a,t,l){var i;return null!=(i=a.if.call(null!=n?n:{},null!=n?n.hasMenu:n,{name:"if",hash:{},fn:e.program(4,l,0),inverse:e.noop,data:l}))?i:""},4:function(e,n,a,t,l){return'\t\t<span class="notif-context-menu-caret"></span>\n'},compiler:[7,">= 4.0.0"],main:function(e,n,a,t,l){var i,r=null!=n?n:{},s=a.helperMissing;return'<div class="notification'+(null!=(i=a.if.call(r,null!=n?n.hasMenu:n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?i:"")+'">\n\t'+e.escapeExpression((a.outlet||n&&n.outlet||s).call(r,null!=n?n.notifTemplate:n,!1,{name:"outlet",hash:{},data:l}))+"\n\n"+(null!=(i=(a.isFlipped||n&&n.isFlipped||s).call(r,"enable-notif-caret",{name:"isFlipped",hash:{},fn:e.program(3,l,0),inverse:e.noop,data:l}))?i:"")+"</div>"},useData:!0}),t={};e.Array.each([],function(n){var a=e.Template.get("hermes/"+n);a&&(t[n]=a)}),e.Template.register("hermes/notification",function(n,l){return l=l||{},l.partials=l.partials?e.merge(t,l.partials):t,a(n,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("notification-view",function(t){t.flutil;t.namespace("Views")[this.name]=t.Base.create("notification-view",t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.objectId=t.objectId,this.object=t.object,this.objectType=t.objectType,this.subevents=t.events,this.isMuted=t.isMuted,this.notifModel=t.notifModel,this},loadState:function(){return t.Promise.resolve()},buildContainer:function(){var t,e,n={object:this.object,type:this.objectType,event:this.subevents[0],subCount:this.subevents.length-1,viewer:this.appContext.getViewer(),eventCount:this.subevents.length,events:this.subevents,hasMenu:!0};if("photo"===this.objectType){for(var i=0;i<n.events.length;i++)n.events[i].owner.url="/photos/"+n.events[i].owner.pathAlias||n.events[i].owner.id;"group-invite"!==n.event.type&&(n.people=this.getEventOwners(n.events),n.peopleCount=n.people.length,n.subPeopleCount=n.people.length-1),"comment"===n.event.type?e="notification-photo-comment":"fave"===n.event.type?e="notification-photo-fave":"gallery"===n.event.type?t="notification-added-to-gallery":"people"===n.event.type?(e="notification-person",n.object.owner.isMe||(n.hasMenu=!1)):"tag"===n.event.type?e="notification-tag":"photo_comment_mention"===n.event.type?e="notification-mention":"group_invite"===n.event.type?(n.groups=this.getEventGroups(n.events),n.groupsCount=n.groups.length,n.subGroupsCount=n.groups.length-1,t="notification-photo-group-invite"):"note"===n.event.type?e="notification-photo-note":"share"===n.event.type&&(e="notification-photo-share",n.hasMenu=!1)}else"person"===this.objectType?(n.event&&"contacted"===n.event.type?(n.event.owner.url="/photos/"+n.event.owner.pathAlias||n.event.owner.id,t="notification-person-follow"):n.event&&"friend_join"===n.event.type&&(t="notification-friend-join",n.hasMenu=!1),n.hasMenu=!1):"group"===this.objectType?n.event&&"group_user_invite"===n.event.type&&(t="notification-group-invite",n.hasMenu=!1):"discussion"===this.objectType?(!n.event||"topic_reply"!==n.event.type&&"reply_reply"!==n.event.type||(n.people=this.getEventOwners(n.events),n.peopleCount=n.people.length,n.subPeopleCount=n.people.length-1,n.replyUrl=n.object.url+"/"+n.event.replyId,t="notification-group-discussion-reply"),n.event&&"group_topic_new"===n.event.type&&(t="notification-group-topic-new",n.hasMenu=!1)):"gallery"===this.objectType?"comment"===n.event.type&&(n.people=this.getEventOwners(n.events),n.peopleCount=n.people.length,n.subPeopleCount=n.people.length-1,t="notification-gallery-comment"):"flickrmail"===this.objectType?(n.event&&"flickrmail"===n.event.type&&(t="notification-flickrmail"),n.hasMenu=!1):"testimonial"===this.objectType&&(n.event&&"testimonial"===n.event.type&&(t="notification-testimonial"),n.hasMenu=!1);return e&&(n.details=this.templates(e)(n),t="notification-photo-shell"),n.notifTemplate=this.templates(t)(n),this.setContainerWithTemplate("notification",n),this},activate:function(){var t=this.subevents[0],e={type:this.objectType,id:this.object.id,eventType:t.type,latestTimestamp:t.timestamp,isMuted:this.isMuted};return this.notificationsList=this.get("container").ancestor(".notifications-list"),this.listItem=this.get("container").ancestor("li.notification-list-item"),this.ctxMenuArrow=this.get("container").one(".notif-context-menu-caret"),this.notification=this.listItem.one(".notification"),this.ctxMenuArrow&&this.registerEventHandler(this.ctxMenuArrow.on("click",this.handleContextArrowClick.bind(this))),this.ctxMenu||(this.get("container").appendChild(this.templates("notification-context-menu")({})),this.ctxMenu=this.get("container").one(".notification-context-menu")),this.turnOffOption=this.ctxMenu.one(".turn-off-object-option"),this.turnOnOption=this.ctxMenu.one(".turn-on-object-option"),this.turnOffOption&&this.registerEventHandler(this.turnOffOption.on("click",this.handleMuteObjectClick.bind(this,e,!0))),this.turnOnOption&&this.registerEventHandler(this.turnOnOption.on("click",this.handleMuteObjectClick.bind(this,e,!1))),e.isMuted?(this.turnOffOption.addClass("hidden"),this.turnOnOption.removeClass("hidden"),this.notification.addClass("muted")):(this.turnOnOption.addClass("hidden"),this.turnOffOption.removeClass("hidden")),this},headline:function(){},getTaggedPeople:function(t){for(var e=[],n=0;n<t.length;n++){for(var i=t[n],o={id:i.personTagged.id,name:i.personTagged.displayname,url:i.personTagged.profileURL},s=!1,a=0;a<e.length;a++)if(e[a].id===o.id){s=!0;break}s||e.push(o)}return e},getEventOwners:function(t){for(var e=[],n=0;n<t.length;n++){for(var i=t[n],o={id:i.owner.id,name:i.owner.displayname,url:i.owner.profileURL},s=!1,a=0;a<e.length;a++)if(e[a].id===o.id){s=!0;break}s||e.push(o)}return e},getEventGroups:function(t){for(var e=[],n=0;n<t.length;n++){for(var i=t[n],o={id:i.group.id,title:i.group.title,url:i.group.url,iconUrl:i.group.bestIconURL},s=!1,a=0;a<e.length;a++)if(e[a].id===o.id){s=!0;break}s||e.push(o)}return e},handleContextArrowClick:function(t){this.toggleContextMenu()},toggleContextMenu:function(){this.listItem.hasClass("expanded")?this.listItem.removeClass("expanded"):(this.notificationsList.all(".notification-list-item.expanded").each(function(t){t.removeClass("expanded")}),this.listItem.addClass("expanded"),this.ctxMenu.removeClass("fast-close"))},handleMuteObjectClick:function(t,e,n){var i=this,o={};o.object_type=t.type,o.object_id=t.id,o.event_type=t.eventType,o.mute_after=t.latestTimestamp,e?(i.turnOffOption.addClass("disabled"),this.notifModel.remoteUpdateMutedObjects(o,this.appContext).then(function(t){i.turnOffOption.addClass("hidden"),i.turnOffOption.removeClass("disabled"),i.turnOnOption.removeClass("hidden"),i.notification.addClass("muted"),i.toggleContextMenu()},function(t){i.turnOffOption.removeClass("disabled")})):(i.turnOnOption.addClass("disabled"),this.notifModel.remoteUpdateUnmutedObjects(o,this.appContext).then(function(t){i.turnOnOption.addClass("hidden"),i.turnOnOption.removeClass("disabled"),i.turnOffOption.removeClass("hidden"),i.notification.removeClass("muted"),i.listItem.hasClass("expanded")&&i.toggleContextMenu()},function(t){i.turnOnOption.removeClass("disabled")})),i.ctxMenu.addClass("fast-close")}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-notifications","hermes-template-notification-photo-comment","hermes-template-notification-group-invite","hermes-template-notification-added-to-gallery","hermes-template-notification-photo-fave","hermes-template-notification-photo-shell","hermes-template-notification-person-follow","hermes-template-notification-tag","hermes-template-notification-person","hermes-template-notification-mention","hermes-template-notification-photo-group-invite","hermes-template-notification-photo-extra-info","hermes-template-notification-photo-note","hermes-template-notification-photo-share","hermes-template-notification-group-discussion-reply","hermes-template-notification-gallery-comment","hermes-template-notification-friend-join","hermes-template-notification-group-topic-new","hermes-template-notification-flickrmail","hermes-template-notification-testimonial","hermes-template-notification-context-menu","hermes-template-notification"],langBundles:["common","relative-dates","notifications"]});YUI.add("hermes-lang-relative-dates_es-us",function(e,_){e.Intl.add("hermes/relative-dates","es-US",{SECOND_LONG:["1 segundo"],SECONDS_LONG:["${time}"," segundos"],MINUTE_LONG:["1 min"],MINUTES_LONG:["${time}"," min"],HOUR_LONG:["1 hora"],HOURS_LONG:["${time}"," horas"],DAY_LONG:["1 Día"],DAYS_LONG:["${time}"," días"],MONTH_LONG:["1 mes"],MONTHS_LONG:["${time}","meses"],YEAR_LONG:["1 año"],YEARS_LONG:["${time}","años"],SECOND_SHORT:["1s"],SECONDS_SHORT:["de ","${time}"],MINUTE_SHORT:["1m"],MINUTES_SHORT:["${time}","m"],HOUR_SHORT:["1h"],HOURS_SHORT:["${time}","h"],DAY_SHORT:["1d"],DAYS_SHORT:["${time}","d"],MONTH_SHORT:["1mes"],MONTHS_SHORT:["${time}","meses"],YEAR_SHORT:["1a"],YEARS_SHORT:["${time}","a"],SECOND_LONG_FUTURE:["en 1 segundo"],SECONDS_LONG_FUTURE:["en ","${time}"," segundos"],MINUTE_LONG_FUTURE:["en 1 minuto"],MINUTES_LONG_FUTURE:["en ","${time}"," minutos"],HOUR_LONG_FUTURE:["en 1 hora"],HOURS_LONG_FUTURE:["en ","${time}"," horas"],DAY_LONG_FUTURE:["en 1 día"],DAYS_LONG_FUTURE:["en ","${time}"," días"],MONTH_LONG_FUTURE:["en 1 mes"],MONTHS_LONG_FUTURE:["en ","${time}"," meses"],YEAR_LONG_FUTURE:["en 1 año"],YEARS_LONG_FUTURE:["en ","${time}"," años"],FUTURE_SHORT_FUTURE:["en ","${time}"],SECOND_SHORT_FUTURE:["en 1 s"],SECONDS_SHORT_FUTURE:["en ","${time}"," s"],MINUTE_SHORT_FUTURE:["en 1 min"],MINUTES_SHORT_FUTURE:["en ","${time}"," min"],HOUR_SHORT_FUTURE:["en 1 h"],HOURS_SHORT_FUTURE:["en ","${time}"," h"],DAY_SHORT_FUTURE:["en 1 d"],DAYS_SHORT_FUTURE:["en ","${time}"," d"],MONTH_SHORT_FUTURE:["en 1 mes"],MONTHS_SHORT_FUTURE:["en ","${time}"," meses"],YEAR_SHORT_FUTURE:["en 1 año"],YEARS_SHORT_FUTURE:["en ","${time}"," años"],SECOND_LONG_PAST:["hace 1 segundo"],SECONDS_LONG_PAST:["hace ","${time}"," segundos"],MINUTE_LONG_PAST:["Hace 1 minuto"],MINUTES_LONG_PAST:["Hace ","${time}"," minutos"],HOUR_LONG_PAST:["Hace 1 hora"],HOURS_LONG_PAST:["hace ","${time}"," horas"],DAY_LONG_PAST:["hace 1 día"],DAYS_LONG_PAST:["${time}"," días atrás "],MONTH_LONG_PAST:["hace 1 mes"],MONTHS_LONG_PAST:["hace ","${time}"," meses"],YEAR_LONG_PAST:["hace 1 año"],YEARS_LONG_PAST:["hace ","${time}"," años"],SECOND_SHORT_PAST:["hace 1 s"],SECONDS_SHORT_PAST:["hace ","${time}"," s"],MINUTE_SHORT_PAST:["hace 1 min"],MINUTES_SHORT_PAST:["hace ","${time}"," min"],HOUR_SHORT_PAST:["hace 1 h"],HOURS_SHORT_PAST:["hace ","${time}"," h"],DAY_SHORT_PAST:["hace 1 d"],DAYS_SHORT_PAST:["hace ","${time}"," d"],MONTH_SHORT_PAST:["hace 1 mes"],MONTHS_SHORT_PAST:["hace ","${time}"," meses"],YEAR_SHORT_PAST:["hace 1 año"],YEARS_SHORT_PAST:["hace ","${time}"," años"],NO_DATE:["-"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-notifications_es-us",function(e,o){e.Intl.add("hermes/notifications","es-US",{NOTIF_PHOTO_FAVE:["<a href='","${ownerUrl}","'>","${owner}","</a> marcó tu ",{type:"select",valueName:"mediaType",options:{photo:["foto como favorita"],video:["video como favorito"],other:["foto como favorita"]}},"."],NOTIF_PHOTO_FAVE_MULTI:[{type:"plural",valueName:"count",options:{one:["<a href='","${ownerUrl}","'>","${owner}","</a> y <a href='","${secondUrl}","'>","${secondOwner}","</a> marcaron tu ",{type:"select",valueName:"mediaType",options:{photo:["foto como favorita"],video:["video como favorito"],other:["foto como favorita"]}}],other:["<a href='","${ownerUrl}","'>","${owner}","</a> y ","${count}"," personas más marcaron tu ",{type:"select",valueName:"mediaType",options:{photo:["foto como favorita"],video:["video como favorito"],other:["foto como favorita"]}}]}},"."],NOTIF_PERSON_FOLLOW:["¡<a href='","${ownerUrl}","'>","${owner}","</a> te está siguiendo!"],NOTIF_PHOTO_COMMENT_YOURS:['<a href="',"${personUrl}",'">',"${personName}","</a> comentó sobre tu ",{type:"select",valueName:"mediaType",options:{photo:["foto"],video:["video"],other:["foto"]}},"."],NOTIF_PHOTO_COMMENT_YOURS_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}",'</a> y <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a> comentaron sobre tu ",{type:"select",valueName:"mediaType",options:{photo:["foto"],video:["video"],other:["foto"]}}],other:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}","</a> y ","${count}"," personas más comentaron sobre tu ",{type:"select",valueName:"mediaType",options:{photo:["foto"],video:["video"],other:["foto"]}}]}},"."],NOTIF_PHOTO_COMMENT_OTHER:['<a href="',"${personUrl}",'">',"${personName}","</a> comentó sobre ",{type:"select",valueName:"mediaType",options:{photo:["la foto"],video:["el video"],other:["la foto"]}},' de <a href="',"${ownerUrl}",'">',"${ownerName}","</a>."],NOTIF_PHOTO_COMMENT_OTHER_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}",'</a> y <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a> comentaron sobre ",{type:"select",valueName:"mediaType",options:{photo:["la foto"],video:["el video"],other:["la foto"]}},' de <a href="',"${ownerUrl}",'">',"${ownerName}","</a>"],other:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}","</a> y ","${count}"," personas más comentaron sobre ",{type:"select",valueName:"mediaType",options:{photo:["la foto"],video:["el video"],other:["la foto"]}},' de <a href="',"${ownerUrl}",'">',"${ownerName}","</a>"]}},"."],NOTIF_MENTION:['<a href="',"${personUrl}",'">',"${personName}","</a> te mencionó en ",{type:"select",valueName:"mediaType",options:{photo:["una foto"],video:["un video"],other:["una foto"]}},"."],NOTIF_MENTION_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> y <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> y ","${count}"," personas más"]}}," te mencionaron en ",{type:"select",valueName:"mediaType",options:{photo:["una foto"],video:["un video"],other:["una foto"]}},"."],NOTIF_PHOTO_GROUP_INVITE:["<a href='","${ownerUrl}","'>","${owner}","</a> te envió una invitación para añadir tu ",{type:"select",valueName:"mediaType",options:{photo:["foto"],video:["video"],other:["foto"]}}," al grupo <a href='","${groupUrl}","'>","${groupName}","</a>."],NOTIF_PHOTO_GROUP_INVITE_MULTI:["Te enviaron una invitación para añadir tu ",{type:"select",valueName:"mediaType",options:{photo:["foto"],video:["video"],other:["foto"]}}," ",{type:"plural",valueName:"count",options:{one:["a los grupos <a href='","${groupUrl}","'>","${groupName}","</a> y <a href='","${secondGroupUrl}","'>","${secondGroupName}","</a>"],other:["al grupo <a href='","${groupUrl}","'>","${groupName}","</a> y ","${count}"," grupos más"]}},"."],NOTIF_GROUP_USER_INVITE:['Recibiste una invitación para unirte al grupo <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_TAGS:['<a href="',"${personUrl}",'">',"${personName}","</a> etiquetó tu ",{type:"select",valueName:"mediaType",options:{photo:["foto"],video:["video"],other:["foto"]}},"."],NOTIF_TAGS_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> y <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> y ","${count}"," personas más"]}}," etiquetó tu ",{type:"select",valueName:"mediaType",options:{photo:["foto"],video:["video"],other:["foto"]}},"."],NOTIF_GALLERY:["Tu ",{type:"select",valueName:"mediaType",options:{photo:["foto"],video:["video"],other:["foto"]}},' se añadió a la galería <a href="',"${galleryUrl}",'">',"${galleryName}","</a>."],NOTIF_GALLERY_MULTI:["Tu ",{type:"select",valueName:"mediaType",options:{photo:["foto"],video:["video"],other:["foto"]}}," se añadió a ",{type:"plural",valueName:"count",options:{one:['las galerías <a href="',"${galleryUrl}",'">',"${galleryName}",'</a> y <a href="',"${secondGalleryUrl}",'">',"${secondGalleryName}","</a>"],other:['la galería <a href="',"${galleryUrl}",'">',"${galleryName}","</a> y ","${count}"," galerías más"]}},"."],NOTIF_ADD_PERSON:['<a href="',"${personUrl}",'">',"${personName}","</a> etiquetó a otras personas en tu ",{type:"select",valueName:"mediaType",options:{photo:["foto"],video:["video"],other:["foto"]}},"."],NOTIF_ADD_PEOPLE:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> y <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> y ","${count}"," personas más"]}}," etiquetaron a otras personas en tu ",{type:"select",valueName:"mediaType",options:{photo:["foto"],video:["video"],other:["foto"]}},"."],NOTIF_ADD_ME:['<a href="',"${ownerUrl}",'">',"${ownerName}","</a> te etiquetó en ",{type:"select",valueName:"mediaType",options:{photo:["una foto"],video:["un video"],other:["una foto"]}},"."],NOTIF_NOTES:['<a href="',"${personUrl}",'">',"${personName}","</a> dejó una nota en tu ",{type:"select",valueName:"mediaType",options:{photo:["foto"],video:["video"],other:["foto"]}},"."],NOTIF_NOTES_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> y <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> y ","${count}"," personas más"]}}," dejaron notas en tu ",{type:"select",valueName:"mediaType",options:{photo:["foto"],video:["video"],other:["foto"]}},"."],NOTIF_NOTES_OTHER:['<a href="',"${personUrl}",'">',"${personName}",'</a> dejó una nota en la foto de <a href="',"${ownerUrl}",'">',"${ownerName}","</a>."],NOTIF_NOTES_OTHER_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> y <a href="',"${secondPersonUrl}",'">',"${secondPersonName}",'</a> dejaron notas en la foto de <a href="',"${ownerUrl}",'">',"${ownerName}","</a>."],other:['<a href="',"${personUrl}",'">',"${personName}","</a> y ","${count}",' personas más dejaron notas en la foto de <a href="',"${ownerUrl}",'">',"${ownerName}","</a>."]}}],NOTIF_VIEW_RECENT_ACTIVITY:["Ver actividad reciente"],NOTIFICATIONS:["Notificaciones"],NOTIF_SHARE:['<a href="',"${personUrl}",'">',"${personName}","</a> compartió ",{type:"select",valueName:"mediaType",options:{photo:["una foto"],video:["un video"],other:["una foto"]}}," contigo."],FLICKR_MAIL_COUNT_PAREN:["(","${count}",")"],FLICKR_GROUP_DISCUSSION_REPLY:['<a href="',"${personUrl}",'">',"${personName}",'</a> respondió a la discusión <a href="',"${replyUrl}",'">',"${objectTitle}",'</a> en el grupo <a href="',"${groupUrl}",'">',"${groupName}","</a>."],FLICKR_GROUP_DISCUSSION_REPLY_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> y <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> y ","${count}"," personas más"]}},' respondieron a la discusión <a href="',"${replyUrl}",'">',"${objectTitle}",'</a> en el grupo <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_GROUP_DISCUSSION_REPLY:['<a href="',"${personUrl}",'">',"${personName}",'</a> respondió a la discusión <a href="',"${replyUrl}",'">',"${objectTitle}",'</a> en el grupo <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_GROUP_DISCUSSION_REPLY_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> y <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> y ","${count}"," personas más"]}},' respondieron a la discusión <a href="',"${replyUrl}",'">',"${objectTitle}",'</a> en el grupo <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_ONBOARDING_TITLE:["NUEVO: Centro de notificaciones"],NOTIF_ONBOARDING_DESCRIPTION:['Aquí encontrarás las notificaciones de tu actividad reciente en Flickr. Esto incluye el acceso sencillo a <a href="/mail">FlickrMail</a>. Creemos que disfrutarás lo que hemos hecho hasta ahora.'],NOTIF_GALLERY_COMMENT:['<a href="',"${personUrl}",'">',"${personName}",'</a> comentó sobre tu exposición <a href="',"${objectUrl}",'">',"${objectName}","</a>."],NOTIF_GALLERY_COMMENT_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> y <a href="',"${secondPersonUrl}",'">',"${secondPersonName}",'</a> comentaron sobre tu exposición <a href="',"${objectUrl}",'">',"${objectName}","</a>."],other:['<a href="',"${personUrl}",'">',"${personName}","</a> y ","${count}",' personas más comentaron sobre tu exposición <a href="',"${objectUrl}",'">',"${objectName}","</a>."]}}],NOTIF_FRIEND_JOIN:['¡Tu amigo <a href="',"${personUrl}",'">',"${personName}","</a> se unió a Flickr!"],NOTIF_NEW_GROUP_DISCUSSION:['<a href="',"${personUrl}",'">',"${personName}",'</a> creó la discusión <a href="',"${discussionUrl}",'">',"${discussionName}",'</a> en el grupo <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_FLICKRMAIL:["<a href='","${personUrl}","'>","${personName}","</a> te envió un mensaje: <a href='","${mailUrl}","'>“","${mailTitle}","”</a>"],NOTIF_TURN_OFF_OBJECT:["Desactivar las notificaciones para esta publicación"],NOTIF_TURN_ON_OBJECT:["Activar las notificaciones para esta publicación"],NOTIF_HIDE_THIS:["Ocultar esta notificación"],NOTIF_NOTHING_HERE:["Cuando recibas notificaciones nuevas, aparecerán aquí."],NOTIF_OFF_FOR_POST:["Las notificaciones para esta publicación están desactivadas."],NOTIF_UNDO:["Deshacer"],NOTIF_TESTIMONIAL:['<a href="',"${personUrl}",'">',"${personName}",'</a> te escribió un <a href="',"${testimonialUrl}",'">testimonio</a>.']})},"@VERSION@",{requires:["intl"]});YUI.add("notifications-view",function(t,i){require("hermes-core/flog")(i);t.namespace("Views")[this.name]=t.Base.create("notifications-view",t.FlickrView,[],{langBundles:this.details.langBundles,registries:{person:"person-models",photo:"photo-models",group:"group-info-models",gallery:"gallery-models"},initializer:function(t){var i=this.appContext.getViewer();return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.nsid=i&&i.signedIn?i.nsid:void 0,t.nsid=this.nsid,this.pageNum=0,this.pageSize=30,this.isFetchingNotifs=!1,this.scrollBottomLoadDist=300,this.endOfNotifs=!1,this.shouldFetchNotifs=t.shouldFetchNotifs,this.height=t.height,this.width=t.width,this.listHeight=t.listHeight,this.overflowX=t.overflowX,this.overflowY=t.overflowY,this.notifFilter=t.notifFilter,this},loadState:function(){return this},buildContainer:function(){return this.setContainerWithTemplate("notifications",{notifications:[],height:this.height,width:this.width,listHeight:this.listHeight,overflowX:this.overflowX,overflowY:this.overflowY}),this},activate:function(){var t,i,e,o,n,s=this;return s.scrollContainer=s.get("container").one(".notifications-list"),s.scrollContainerElement=this.scrollContainer.getDOMNode(),this.registerEventHandler(s.scrollContainer.on("scroll",s.handleScrollNotifications.bind(s))),this.registerEventHandler(s.scrollContainer.on("mousewheel",s.preventParentScroll.bind(s))),s.get("personNotificationsModels")?s.getMoreNotifications():(t=this.appContext.getViewer(),this.appContext.getModel("person-notifications-models",t.nsid).then(function(t){s.set("personNotificationsModels",t),e=t.getValue("notifications").size(),o=t.getValue("unseenNotificationCount"),s.shouldFetchNotifs&&0!==o||0===e||t.getValue("muteChanged")?(s.shouldFetchNotifs=!1,t.setValue("unseenNotificationCount",0),t.setValue("muteChanged",!1),s.get("container").one(".notifications-list").addClass("loading"),s.getMoreNotifications()):(n=t.getValue("notifications").getList(),s.pageNum=Math.floor(e/s.pageSize),s.appendPage(n)),(i=t.getValue("unreadFlickrMailCount"))&&0!==i&&s.get("container").one(".flickr-mail-count").setHTML(s.intlMessage({intlName:"notifications.FLICKR_MAIL_COUNT_PAREN",count:i}))})),this},handleScrollNotifications:function(t){this.isFetchingNotifs||this.scrollContainerElement.offsetHeight+this.scrollContainerElement.scrollTop+this.scrollBottomLoadDist>=this.scrollContainerElement.scrollHeight&&this.getMoreNotifications()},preventParentScroll:function(t){var i,e,o=t.target.ancestor(".notifications-list");o&&(i=t.wheelDelta<0,((e=o.getDOMNode()).scrollTop<=0&&!i||e.scrollTop+e.offsetHeight>=e.scrollHeight&&i)&&t.preventDefault())},getMoreNotifications:function(){this.endOfNotifs||(this.isFetchingNotifs=!0,this.showBalls(this.get("container").one(".notifications-list")),this.retrieveNotifsPage())},appendPage:function(i){var e=this;i.forEach(function(i){var o=i.toJSON();o.appContext=e.appContext,o.notifModel=e.get("personNotificationsModels"),o.events&&0!==o.events.length&&new t.Views["notification-view"](o).initialize(o).then(function(n){var s=t.Node.create('<li class="notification-list-item"></li>');e.get("container").one(".notifications-list").append(s),o.seen||s.addClass("unseen"),s.setHTML(n.get("container")),i.setValue("seen",!0),n.activate()})})},showBalls:function(i){this.balls||(this.balls=t.Node.create('<li class="loading-balls"></li>'),this.balls.setHTML(this.templates("flickr-balls")({}))),(i||this.get("container")).append(this.balls)},hideBalls:function(){this.balls&&this.balls.remove()},retrieveNotifsPage:function(){var t=this,i=t.get("personNotificationsModels");return i.getValue("notifications").getPage({page:t.pageNum+1,apiParams:{filter:t.notifFilter}}).then(function(e){return 0!==e.length?(t.pageNum++,t.set("personNotifications",i.getValue("notifications")),t.appendPage(e)):(0===t.pageNum&&t.get("container").one(".notifications-empty-state").removeClass("hidden"),t.endOfNotifs=!0),t.get("container").one(".notifications-list").removeClass("loading"),t.hideBalls(),t.isFetchingNotifs=!1,t},function(t){}).then(function(t){t.registerEventHandler(t.get("container").all("a").on("focus",function(i){var e=i.target.ancestor("li");e&&t.findFocus.call(this,e)}.bind(t)))})},findFocus:function(t){var i=t.one("a.photo");i?i.focus():t.one("a:first-child").focus()}})},"@VERSION@",{requires:["flickr-view","hermes-template-notifications"],langBundles:["common","notifications"],optional:["person-notifications-models","notification-view","photo-models","group-info-models","person-models","gallery-models"]});YUI.add("notifications-menu-view",function(t){"use strict";t.namespace("Views")[this.name]=t.Base.create("notifications-menu-view",t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.pollingFailed=!1,this.shouldFetchNotifs=!0,this.notifFilter=["group_topic_new","user_gallery_comment"].join(","),""===this.get("container").get("innerHTML")&&this.setContainerWithTemplate("notifications-menu"),this},loadState:function(){var e=this,i=this.appContext.getViewer();return this.appContext.getModel("person-notifications-models",i.nsid).then(function(n){if(e.set("personNotificationsModel",n),Date.now()-n.getValue("unseenLastFetchedTimestamp")>t.config.flickr.notifications.loading_count_refetch_delay)return n.remoteReadUnseenNotificationCount({id:i.nsid,filter:e.notifFilter},e.appContext).then(null,function(t){e.pollingFailed=!0})})},buildContainer:function(){var t=this.formatCount99(this.get("personNotificationsModel").getValue("unseenNotificationCount"));return this.setContainerWithTemplate("notifications-menu",{unseenNotificationCount:t}),this},activate:function(){var t=this.get("personNotificationsModel");this.unseenBadge=this.get("container").one(".c-notification-unseencount"),this.unseenCount=0,this.notifIcon=this.get("container").one(".c-notification-icon"),0===t.getValue("unseenNotificationCount")?this.unseenBadge.addClass("hidden"):this.unseenBadge.removeClass("hidden"),this.registerEventHandler(this.get("container").on("click",this.openMenu.bind(this))),this.registerEventHandler(this.get("container").on("key",this.keyboardToggleMenu.bind(this),"down:13,32")),this.registerEventHandler(this.get("container").on("key",this.enterMenu.bind(this),"down:9,40")),this.pollForUnseenNotifs()},pollForUnseenNotifs:function(){this.pollIntervalId=setInterval(this.readUnseenNotifs.bind(this),t.config.flickr.notifications.polling_delay)},readUnseenNotifs:function(){var e=this,i=this.appContext.getViewer();e.get("personNotificationsModel").remoteReadUnseenNotificationCount({id:i.nsid,filter:e.notifFilter},e.appContext).then(function(t){e.shouldFetchNotifs=!0,t!==e.unseenCount&&(e.unseenCount=t,0!==t?(e.unseenBadge.removeClass("hidden"),e.unseenBadge.set("text",e.formatCount99(t))):e.unseenBadge.addClass("hidden"))},function(i){clearInterval(e.pollIntervalId),e.pollingFailed||(e.pollingFailedTimeoutId=setTimeout(e.pollForUnseenNotifs.bind(e),t.config.flickr.notifications.polling_failure_timeout)),e.pollingFailed=!0})},openMenu:function(){this.revealNotifications()},keyboardToggleMenu:function(t){t.preventDefault(),!this.droparound||this.droparound.isClosed?this.revealNotifications():this.droparound.close()},enterMenu:function(t){var e=t.keyCode;if(9===e&&!t.shiftKey&&"true"===t.target.getAttribute("aria-expanded")||40===e){t.preventDefault();var i=this.droparound.get("container").one("div.notifs-droparound");if(i){var n=i.one("a.mail-icon");this.registerEventHandler(n.on("key",this.enterNotificationsList.bind(this),"down:9,40")),n.focus()}}},enterNotificationsList:function(t){var e=t.keyCode;(9===e&&!t.shiftKey||40===e)&&(t.preventDefault(),this.droparound.get("subview").findFocus.call(this,this.droparound.get("container").one("div.notifs-droparound").one("ul").one("li:first-child")))},revealNotifications:function(){var e,i=this.appContext.viewportData.getWidth(),n=this.appContext.viewportData.getHeight(),o=i>700?60:67,s=i>700?"":i-2+"px",a=n>1e3?"800px":n-200+"px";(e=new t.Views["notifications-view"]({appContext:this.appContext,width:s,listHeight:a,shouldFetchNotifs:this.shouldFetchNotifs,notifFilter:this.notifFilter})).appContext=this.appContext,this.droparound=new t.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,anchorOffsetVertical:-4,anchorOffsetHorizontal:o,mirrorArrowAdjustment:o-11,showDropArrow:!0,contentPadding:0,classList:"notifs-droparound no-border big-shadow",anchorElement:this.get("container").one(".c-notification-icon"),subview:e,observePageResize:!0,positionFixed:!0,autoSizeToContent:!0}),this.droparound.show(),this.unseenBadge.addClass("hidden"),this.shouldFetchNotifs=!1},formatCount99:function(t){return t>=100?"99+":t},destructor:function(){clearInterval(this.pollIntervalId),clearTimeout(this.pollingFailedTimeoutId)}})},"@VERSION@",{requires:["flickr-view","hermes-template-notifications-menu","fluid-droparound-view","notifications-view"],langBundles:["notifications","common"]});YUI.add("hermes-template-person-card",function(a,n){var l=a.Template.Handlebars.revive({1:function(a,n,l,e,t){var s;return"\t\t\t\t\t"+a.escapeExpression(a.lambda(null!=(s=null!=n?n.person:n)?s.realname:s,n))+"\n\t\t\t\t\t"+(null!=(s=l.if.call(null!=n?n:{},null!=n?n.personLocation:n,{name:"if",hash:{},fn:a.program(2,t,0),inverse:a.noop,data:t}))?s:"")+"\n"},2:function(a,n,l,e,t){return" - "},4:function(a,n,l,e,t){var s;return null!=(s=l.each.call(null!=n?n:{},null!=n?n.photostream:n,{name:"each",hash:{},fn:a.program(5,t,0),inverse:a.noop,data:t}))?s:""},5:function(a,n,l,e,t){var s;return null!=(s=l.if.call(null!=n?n:{},null!=n?n.needsInterstitial:n,{name:"if",hash:{},fn:a.program(6,t,0),inverse:a.program(8,t,0),data:t}))?s:""},6:function(a,n,l,e,t){var s,r,i=null!=n?n:{},o=l.helperMissing,u=a.escapeExpression,c=a.lambda;return'\t\t\t\t\t<a href="'+u("function"==typeof(r=null!=(r=l.url||(null!=n?n.url:n))?r:o)?r.call(i,{name:"url",hash:{},data:t}):r)+'" title="'+u("function"==typeof(r=null!=(r=l.title||(null!=n?n.title:n))?r:o)?r.call(i,{name:"title",hash:{},data:t}):r)+'" width="'+u(c(null!=(s=null!=(s=null!=n?n.sizes:n)?s.sq:s)?s.width:s,n))+'" height="'+u(c(null!=(s=null!=(s=null!=n?n.sizes:n)?s.sq:s)?s.height:s,n))+'" style="background: url(https://s.yimg.com/pw/images/spaceball.gif);" data-track="personCardRecentPhotosClick"></a>\n'},8:function(a,n,l,e,t){var s,r,i=null!=n?n:{},o=l.helperMissing,u=a.escapeExpression;return'\t\t\t\t\t<a href="'+u("function"==typeof(r=null!=(r=l.url||(null!=n?n.url:n))?r:o)?r.call(i,{name:"url",hash:{},data:t}):r)+'" title="'+u("function"==typeof(r=null!=(r=l.title||(null!=n?n.title:n))?r:o)?r.call(i,{name:"title",hash:{},data:t}):r)+'" style="background: url('+u(a.lambda(null!=(s=null!=(s=null!=n?n.sizes:n)?s.sq:s)?s.displayUrl:s,n))+');" data-track="personCardRecentPhotosClick"></a>\n'},10:function(a,n,l,e,t){return'\t\t\t<span class="tertiary">'+a.escapeExpression((l.intlMessage||n&&n.intlMessage||l.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"person.NO_PHOTOS"},data:t}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(a,n,l,e,t){var s,r,i=null!=n?n:{},o=l.helperMissing,u=a.escapeExpression,c=a.lambda;return'\n<div>\n\t<section>\n\t\t<div class="follow-subview">'+u((l.outlet||n&&n.outlet||o).call(i,null!=n?n["follow-view"]:n,{name:"outlet",hash:{},data:t}))+'</div>\n\n\t\t<div class="attribution">\n\t\t\t<a href="'+u(c(null!=(s=null!=n?n.personURLS:n)?s.photostream:s,n))+'" data-track="personCardAttributionNameClick">\n\t\t\t\t<h3 class="fade-out">'+u(c(null!=(s=null!=n?n.person:n)?s.username:s,n))+'</h3>\n\t\t\t</a>\n\t\t</div>\n\t\t<div class="info">\n\t\t\t<span class="secondary realname fade-out">\n'+(null!=(s=l.if.call(i,null!=(s=null!=n?n.person:n)?s.realname:s,{name:"if",hash:{},fn:a.program(1,t,0),inverse:a.noop,data:t}))?s:"")+"\t\t\t\t"+u("function"==typeof(r=null!=(r=l.personLocation||(null!=n?n.personLocation:n))?r:o)?r.call(i,{name:"personLocation",hash:{},data:t}):r)+'\n\t\t\t</span>\n\t\t</div>\n\n\t\t<div class="recent-photos">\n'+(null!=(s=l.if.call(i,null!=n?n.photostream:n,{name:"if",hash:{},fn:a.program(4,t,0),inverse:a.program(10,t,0),data:t}))?s:"")+'\t\t</div>\n\t</section>\n</div>\n\n<div class="links secondary">\n\t<a href="'+u(c(null!=(s=null!=n?n.personURLS:n)?s.sendFlickrMail:s,n))+'" data-track="personCardMessageClick">'+u((l.intlMessage||n&&n.intlMessage||o).call(i,{name:"intlMessage",hash:{intlName:"person.MESSAGE"},data:t}))+'</a>\n\t<a href="'+u(c(null!=(s=null!=n?n.personURLS:n)?s.albums:s,n))+'" data-track="personCardAlbumsClick">'+u((l.intlMessage||n&&n.intlMessage||o).call(i,{name:"intlMessage",hash:{intlName:"person.ALBUMS"},data:t}))+'</a>\n\t<a href="'+u(c(null!=(s=null!=n?n.personURLS:n)?s.favorites:s,n))+'" data-track="personCardFavesClick">'+u((l.intlMessage||n&&n.intlMessage||o).call(i,{name:"intlMessage",hash:{intlName:"person.FAVES"},data:t}))+'</a>\n\t<a class="align-right" href="'+u(c(null!=(s=null!=n?n.personURLS:n)?s.profile:s,n))+'" data-track="personCardProfileClick">'+u((l.intlMessage||n&&n.intlMessage||o).call(i,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:t}))+"</a>\n</div>\n"},useData:!0}),e={};a.Array.each([],function(n){var l=a.Template.get("hermes/"+n);l&&(e[n]=l)}),a.Template.register("hermes/person-card",function(n,t){return t=t||{},t.partials=t.partials?a.merge(e,t.partials):e,l(n,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("person-card-view",function(e){e.namespace("Views")[this.name]=e.Base.create("person-card-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.pathAlias=e.pathAlias,this.set("isActiveViewAgnostic",e.isActiveViewAgnostic||!1),""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},subviewConfig:{"follow-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1}},loadState:function(){var t=this,s={contentType:7};return this.nsid?s.id=this.nsid:s.pathAlias=this.pathAlias,new e.FlickrPromise({person:this.appContext.getModel("person-models",s),photostream:this.appContext.getModel("photostream-models",s),personProfile:this.appContext.getModel("person-profile-models",s)}).then(function(e){return t.personModel=e.person,t.personLocation=e.personProfile.getValue("location"),e.photostream.getValue("photoPageList").getPage({page:1,perPage:5}).then(function(e){t.photostreamPhotos=e})},function(e){t.loadingError=!0,1===e.code&&"User not found"===e.message&&(t.badUser=!0)})},buildContainer:function(){var t,s;return this.loadingError?(s=this.badUser?'<span class="no-user">'+this.intlMessage({intlName:"person.NO_LONGER_ON_FLICKR"})+"</span>":'<span class="error-user">'+this.intlMessage({intlName:"person.ERROR_LOADING"})+"</span>",this.setContainerHTML(s)):(t=this.personModel.toJSON(),this.setContainerWithTemplate("person-card",{person:t,photostream:this.photostreamPhotos.map(function(e){return e.toJSON()}),personLocation:this.personLocation,personURLS:e.URLHelper.generatePersonUrls(this.personModel)})),this},activate:function(){var e=this.get("container"),t=e.one(".follow-view"),s=t.one(".relationship"),o=t.one(".relationship > .is-following"),n=e.one(".attribution");return s?o&&n.addClass("shorter"):n.addClass("full"),this}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-person-card","url-helper"],langBundles:["person","common"]});YUI.add("hermes-lang-person_es-us",function(e,a){e.Intl.add("hermes/person","es-US",{MESSAGE:["Mensaje"],ALBUMS:["Álbumes"],FAVES:["Favoritos"],PROFILE:["Perfil"],NO_PHOTOS:["Este usuario no tiene fotos visibles para ti."],NO_LONGER_ON_FLICKR:["Este usuario no se encuentra o ya no tiene cuenta de Flickr."],ERROR_LOADING:["Se produjo un error al cargar la tarjeta del usuario. Vuelve a intentarlo."],RELATIONSHIP_FRIEND_ERROR:["Ocurrió un error al ajustar la relación con tu amigo."],RELATIONSHIP_FAMILY_ERROR:["Hubo un problema al configurar la relación con tu familia."],SIGN_IN_BEFORE_FOLLOW_TITLE:["¡Encontraste a alguien para seguir!"],SIGN_IN_BEFORE_FOLLOW_MESSAGE:["¡Grandioso! Simplemente, inicia sesión para seguirlos."],JOIN_FLICKR_AND_FOLLOW:["Únete a Flickr y no te pierdas nunca una publicación de ","${person}","."],SIGN_IN_AND_FOLLOW:["Iniciar sesión y seguir"],CURATOR_PASS_OVER:["Ignorar"],CURATOR_PASS_OVER_UNDO:["Participar"]})},"@VERSION@",{requires:["intl"]});YUI.add("person-menu-view",function(e){var t=require("hermes-core/type-validator");e.namespace("Views")[this.name]=e.Base.create("person-menu-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.containerSelector=e.containerSelector,this.excludeSelectors=[".no-menu"].concat(e.excludeSelectors||[]),this.personSelector=".avatar.person, .photo-attribution .attribution-icon, .comment-icon.circle-icon a, .show-person-menu",this.dialogCache=[],this.currentDialog,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerHTML(""),this},toJSON:function(){return e.merge(this.get("user"))},activate:function(){this.registerEventHandler(e.one(this.containerSelector).delegate("click",this.onClickTarget.bind(this),this.personSelector,this))},onClickTarget:function(t){var n;this.shouldProcessTarget(t.target)&&(t.preventDefault(),t.halt(),n=t.target.ancestor().one(this.personSelector)||t.target.ancestor(this.personSelector)||t.target.ancestor("a"),this.createParamsAndManageState(n),e.rapidTracker.beacon(this.name,"personCardOpened"))},shouldProcessTarget:function(e){return null!==e.ancestor()&&!this.excludeSelectors.some(function(t){return e.ancestor().one(t)||e.ancestor(t)})},createParamsAndManageState:function(e){var t=this.getParams(e);this.createDialog(t,e)},getParams:function(e){var n,i={appContext:this.appContext,isActiveViewAgnostic:!0},r="";return(r=e.getData("person-nsid")||e.ancestor().getData("person-nsid"))||(0===(n=e.getAttribute("href")||e.ancestor().getAttribute("href")).indexOf("/photos")?r=n.replace("/photos/","").replace("/",""):0===n.indexOf("/groups/")&&(r=n.slice(n.lastIndexOf("/")+1))),i.disableRefreshOnRelationshipChange=e.hasClass("no-refresh"),t.nsid(r)?i.nsid=r:i.pathAlias=r,i.signature=r,i},createDialog:function(t,n){var i,r=this;this.fire("open"),e.fire("personMenuOpen"),this.dialogCache.some(function(e){return e.key===t.signature&&(i=e.dialog,!0)}),i?i.set("anchorElement",n.ancestor().hasClass("comment-icon")?n.ancestor():n):((i=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,showDropArrow:!0,width:350,height:165,anchorOffsetHorizontal:0,observePageResize:!0,anchorElement:n.ancestor().hasClass("comment-icon")?n.ancestor():n,subview:new e.Views["person-card-view"](t)})).on("clickOverlay",function(e){r.nextElClicked=[e.clientX,e.clientY]}),i.on("closeDroparound",function(){setTimeout(function(){if(r.nextElClicked){var t,n=document.elementFromPoint(r.nextElClicked[0],r.nextElClicked[1]);n&&(t=e.one(n))&&r.personSelector.split(",").some(function(e){return t.hasClass(e.replace(".",""))})&&r.shouldProcessTarget(t)&&r.createParamsAndManageState(t),r.nextElClicked=null}},10)}),this.dialogCache.length>10&&this.dialogCache.shift(),this.dialogCache.push({key:t.signature,dialog:i})),this.currentDialog=i,i.show()},closeDialog:function(){this.currentDialog&&(this.currentDialog.close(),e.fire("personMenuClose"))},destructor:function(){var t=this;this.currentDialog=null,e.Object.each(this.dialogCache,function(e){t.dialogCache[e]&&(t.dialogCache[e].destroy(),t.dialogCache[e]=null)}),this.dialogCache=[]}})},"@VERSION@",{requires:["flickr-promise","flickr-view","fluid-droparound-view","person-card-view"],langBundles:["person","common"]});YUI.add("hermes-template-group-card",function(a,n){var l=a.Template.Handlebars.revive({1:function(a,n,l,e,t){var s;return null!=(s=l.each.call(null!=n?n:{},null!=n?n.groupPool:n,{name:"each",hash:{},fn:a.program(2,t,0),inverse:a.noop,data:t}))?s:""},2:function(a,n,l,e,t){var s,r,i=null!=n?n:{},u=l.helperMissing,o=a.escapeExpression,p=a.lambda;return'\t\t\t\t\n\t\t\t\t<a href="'+o("function"==typeof(r=null!=(r=l.url||(null!=n?n.url:n))?r:u)?r.call(i,{name:"url",hash:{},data:t}):r)+'" title="'+o("function"==typeof(r=null!=(r=l.title||(null!=n?n.title:n))?r:u)?r.call(i,{name:"title",hash:{},data:t}):r)+'" width="'+o(p(null!=(s=null!=(s=null!=n?n.sizes:n)?s.sq:s)?s.width:s,n))+'" height="'+o(p(null!=(s=null!=(s=null!=n?n.sizes:n)?s.sq:s)?s.height:s,n))+'"\n'+(null!=(s=l.if.call(i,null!=n?n.needsInterstitial:n,{name:"if",hash:{},fn:a.program(3,t,0),inverse:a.program(5,t,0),data:t}))?s:"")+"\t\t\t\t></a>\n\t\t\t\t\n"},3:function(a,n,l,e,t){return'\t\t\t\t\tclass="restricted"\n'},5:function(a,n,l,e,t){var s;return'\t\t\t\t\tstyle="background: url('+a.escapeExpression(a.lambda(null!=(s=null!=(s=null!=n?n.sizes:n)?s.sq:s)?s.displayUrl:s,n))+');"\n'},7:function(a,n,l,e,t){var s;return null!=(s=l.if.call(null!=n?n:{},null!=n?n.canAddPhotos:n,{name:"if",hash:{},fn:a.program(8,t,0),inverse:a.program(10,t,0),data:t}))?s:""},8:function(a,n,l,e,t){var s,r=null!=n?n:{},i=l.helperMissing,u=a.escapeExpression;return'\t\t\t\t<p class="tertiary">'+u((l.intlMessage||n&&n.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"groups.BE_THE_FIRST"},data:t}))+'</p>\n\t\t\t\t<p class="tertiary"><a href="'+u(a.lambda(null!=(s=null!=n?n.groupURLS:n)?s.photos:s,n))+'">'+u((l.intlMessage||n&&n.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"groups.ADD_SOME_PHOTOS"},data:t}))+"</a></p>\n"},10:function(a,n,l,e,t){return"\t\t\t\t<p>"+a.escapeExpression((l.intlMessage||n&&n.intlMessage||l.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"groups.NO_PHOTOS"},data:t}))+"</p>\n"},12:function(a,n,l,e,t){var s,r=a.escapeExpression;return'\t<a href="'+r(a.lambda(null!=(s=null!=n?n.groupURLS:n)?s.admin:s,n))+'">'+r((l.intlMessage||n&&n.intlMessage||l.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"groups.ADMIN_LINK_LABEL"},data:t}))+"</a>\n"},14:function(a,n,l,e,t){var s;return null!=(s=l.if.call(null!=n?n:{},null!=(s=null!=n?n.group:n)?s.isModerator:s,{name:"if",hash:{},fn:a.program(15,t,0),inverse:a.noop,data:t}))?s:""},15:function(a,n,l,e,t){var s,r=a.escapeExpression;return'\t\t<a href="'+r(a.lambda(null!=(s=null!=n?n.groupURLS:n)?s.admin:s,n))+'">'+r((l.intlMessage||n&&n.intlMessage||l.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"groups.ADMIN_LINK_LABEL"},data:t}))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(a,n,l,e,t){var s,r=null!=n?n:{},i=l.helperMissing,u=a.escapeExpression,o=a.lambda;return'\n<div>\n\t<section>\n\t\t<div class="join-subview">\n\n\t\t\t'+u((l.outlet||n&&n.outlet||i).call(r,null!=n?n["join-group-view"]:n,{name:"outlet",hash:{},data:t}))+'\n\n\t\t</div>\n\n\t\t<div class="attribution">\n\t\t\t<a href="'+u(o(null!=(s=null!=n?n.groupURLS:n)?s.about:s,n))+'">\n\t\t\t\t<h3 class="fade-out">'+u((l.renderTrustedMarkup||n&&n.renderTrustedMarkup||i).call(r,null!=(s=null!=n?n.group:n)?s.title:s,{name:"renderTrustedMarkup",hash:{},data:t}))+'</h3>\n\t\t\t</a>\n\t\t</div>\n\t\t<div class="stats">\n\t\t\t<span class="secondary fade-out">'+u((l.intlMessage||n&&n.intlMessage||i).call(r,{name:"intlMessage",hash:{createdYear:null!=n?n.createdYear:n,intlName:"groups.CREATED_YEAR"},data:t}))+" - "+u((l.intlMessage||n&&n.intlMessage||i).call(r,{name:"intlMessage",hash:{updatedAgo:null!=n?n.updatedAgo:n,intlName:"groups.UPDATED_TIME_AGO"},data:t}))+'</span>\n\t\t</div>\n\n\t\t<div class="recent-photos">\n'+(null!=(s=l.if.call(r,null!=n?n.groupPool:n,{name:"if",hash:{},fn:a.program(1,t,0),inverse:a.program(7,t,0),data:t}))?s:"")+'\t\t</div>\n\t</section>\n</div>\n\n<div class="links secondary">\n\t<a href="'+u(o(null!=(s=null!=n?n.groupURLS:n)?s.photos:s,n))+'">'+u((l.intlMessage||n&&n.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"groups.PHOTOS_LINK_LABEL"},data:t}))+'</a>\n\t<a href="'+u(o(null!=(s=null!=n?n.groupURLS:n)?s.discussions:s,n))+'">'+u((l.intlMessage||n&&n.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"groups.DISCUSSIONS_LINK_LABEL"},data:t}))+"</a>\n"+(null!=(s=l.if.call(r,null!=(s=null!=n?n.group:n)?s.isAdmin:s,{name:"if",hash:{},fn:a.program(12,t,0),inverse:a.program(14,t,0),data:t}))?s:"")+"</div>"},useData:!0}),e={};a.Array.each([],function(n){var l=a.Template.get("hermes/"+n);l&&(e[n]=l)}),a.Template.register("hermes/group-card",function(n,t){return t=t||{},t.partials=t.partials?a.merge(e,t.partials):e,l(n,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("group-card-view",function(e){e.namespace("Views")[this.name]=e.Base.create("group-card-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,this.groupPathAlias=e.groupPathAlias,this.set("isActiveViewAgnostic",e.isActiveViewAgnostic||!1),""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},subviewConfig:{"join-group-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,shortLabels:!0,theme:"light"}},loadState:function(){var t=this,r=this.groupId;return new e.FlickrPromise({groupPool:this.appContext.getModel("group-pool-models",r),group:this.appContext.getModel("group-models",r),groupInfo:this.appContext.getModel("group-info-models",r)}).then(function(e){return t.groupModel=e.group,t.groupInfo=e.groupInfo,e.groupPool.getValue("photoPageList").getPage({page:1,perPage:5}).then(function(e){t.groupPhotos=e})},function(e){t.loadingError=!0})},buildContainer:function(){var t,r,o=!1;return this.loadingError?this.setContainerHTML('<span class="error-group">'+this.intlMessage({intlName:"groups.ERROR_LOADING"})+"</span>"):(t=this.groupModel.toJSON(),(o="disabled"!==(r=this.groupInfo.getValue("throttle")).mode&&r.remaining>0||"none"===r.mode)&&(o=t.isMember),this.setContainerWithTemplate("group-card",{group:t,groupPool:this.groupPhotos.map(function(e){return e.toJSON()}),canAddPhotos:o,groupURLS:e.URLHelper.generateGroupUrls(this.groupModel),createdYear:t.dateCreated.year(),updatedAgo:this.intlMessage(e.Handlebars.helpers._friendlySinceDate(t.latestGroupActivity,!0,!0))})),this},activate:function(){return this.registerEventHandler(this.get("container").delegate("click",function(e){e.preventDefault()},".join")),this}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-group-card","url-helper","handlebars-helpers"],langBundles:["groups","relative-dates"]});YUI.add("group-menu-view",function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create("group-menu-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.containerSelector=e.containerSelector,this.excludeSelectors=[".large",".no-menu"].concat(e.excludeSelectors||[]),this.groupSelector=".avatar.group",this.dialogCache=[],this.currentDialog,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerHTML(""),this},activate:function(){this.registerEventHandler(e.one(this.containerSelector).delegate("click",this.onClickTarget.bind(this),this.groupSelector,this))},onClickTarget:function(e){var t;this.shouldProcessTarget(e.target)&&(e.preventDefault(),e.halt(),t=e.target,this.createParamsAndManageState(t))},shouldProcessTarget:function(e){return null!==e.ancestor()&&!this.excludeSelectors.some(function(t){return e.ancestor().one(t)||e.ancestor(t)})},createParamsAndManageState:function(e){var t=this.getParams(e);this.createDialog(t,e)},getParams:function(e){var t={appContext:this.appContext,isActiveViewAgnostic:!0};return t.groupId=e.getData("group-nsid"),t.signature=t.groupId,t},createDialog:function(t,i){var n,a=this;this.fire("open"),this.dialogCache.some(function(e){return e.key===t.signature&&(n=e.dialog,!0)}),n?n.set("anchorElement",i):((n=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,showDropArrow:!0,width:350,height:165,observePageResize:!0,anchorElement:i,anchorOffsetHorizontal:4,subview:new e.Views["group-card-view"](t)})).on("clickOverlay",function(e){a.nextElClicked=[e.clientX,e.clientY]}),n.on("closeDroparound",function(){setTimeout(function(){if(a.nextElClicked){var t,i,n=document.elementFromPoint(a.nextElClicked[0],a.nextElClicked[1]);n&&(t=e.one(n),i=a.groupSelector.split(",").some(function(e){return t.hasClass(e.replace(".",""))}),t&&i&&a.shouldProcessTarget(t)&&a.createParamsAndManageState(t)),a.nextElClicked=null}},10)}),this.dialogCache.length>10&&this.dialogCache.shift(),this.dialogCache.push({key:t.signature,dialog:n})),this.currentDialog=n,n.show()},closeDialog:function(){this.currentDialog&&this.currentDialog.close()},destructor:function(){var t=this;this.currentDialog=null,e.Object.each(this.dialogCache,function(e){t.dialogCache[e]&&(t.dialogCache[e].destroy(),t.dialogCache[e]=null)}),this.dialogCache=null}})},"@VERSION@",{requires:["flickr-promise","flickr-view","fluid-droparound-view","group-card-view"],langBundles:["common"]});YUI.add("hermes-template-signup-interstitial",function(e,a){var s=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,s,t,i){var n=null!=a?a:{},l=s.helperMissing,r=e.escapeExpression;return'<div class="signup-interstitial-body interstitial-fade">\n\t<div class="close-x"></div>\n\t<div class="body">\n\t\t<div class="logo"></div>\n\t\t<h3 class="signup-interstitial-message">'+r((s.intlMessage||a&&a.intlMessage||l).call(n,{name:"intlMessage",hash:{intlName:"growth.MINI_SIGNUP_FOOTER_MESSAGE_EXPLORE"},data:i}))+'</h3>\n\t\t<div><a href="/signup" class="butt large action signup-button">'+r((s.intlMessage||a&&a.intlMessage||l).call(n,{name:"intlMessage",hash:{intlName:"common.SIGN_UP_WITH_YAHOO"},data:i}))+'</a></div>\n\t\t<a href="/signin" class="signin-link">'+r((s.intlMessage||a&&a.intlMessage||l).call(n,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:i}))+"</a>\n\t</div>\n</div>\n"},useData:!0}),t={};e.Array.each([],function(a){var s=e.Template.get("hermes/"+a);s&&(t[a]=s)}),e.Template.register("hermes/signup-interstitial",function(a,i){return i=i||{},i.partials=i.partials?e.merge(t,i.partials):t,s(a,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("signup-interstitial-view",function(t,i){"use strict";var n;n={css:{destinationContainer:"body",closeX:".close-x",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content",modalSelector:".modal"},options:{}},t.namespace("Views").SignUpInterstitial=t.FlickrView.create(this.name,t.Views.FluidModal,[],{langBundles:this.details.langBundles,buildContainer:function(){var i=t.one(n.css.destinationContainer);if(!this.alreadyShowingModal){var e={signUpMessage:this.get("signUpMessage")};this.setContainerWithTemplate("signup-interstitial",e),i&&(i.append(this.get("container")),this.reposition(),this.get("modalOverlayType").get("overlay").removeClass("interstitial-fade"),this.get("container").one(".signup-interstitial-body").removeClass("interstitial-fade"))}return this},activate:function(){var t=this.get("container");this.registerEventHandler(t.one(".signup-button").on("click",this.instrumentSignupClick.bind(this))),this.registerEventHandler(t.one(".signin-link").on("click",this.instrumentSigninClick.bind(this))),this.constructor.superclass.activate.call(this)},instrumentSignupClick:function(n){t.rapidTracker.beacon(i,"signupIntSignupClick")},instrumentSigninClick:function(n){t.rapidTracker.beacon(i,"signupIntSigninClick")},show:function(){t.rapidTracker.beacon(i,"signupIntShown"),this.constructor.superclass.show.call(this)},close:function(n){t.rapidTracker.beacon(i,"signupIntCancelClick"),this.constructor.superclass.close.call(this,n)}},{ATTRS:{showFooter:{value:!1},showHeader:{value:!1},showButtonFlavorText:{value:!1},showButtons:{value:!1},showActionButton:{value:!1},showCancelButton:{value:!1},modalSelector:{value:".signup-interstitial-body"},modalOverlayType:{value:t.OverlayManager.SignupInterstitialOverlay}}})},"@VERSION@",{requires:["flickr-view","fluid-modal-view","hermes-template-signup-interstitial"],optionalRequires:["fluid"],langBundles:["common","growth"]});YUI.add("hermes-lang-growth_es-us",function(e,a){e.Intl.add("hermes/growth","es-US",{MINI_SIGNUP_FOOTER_MESSAGE:["No te pierdas nunca una publicación de ","${username}"],MINI_SIGNUP_FOOTER_MESSAGE_EXPLORE:["Únete a Flickr para explorar fotos de clase mundial"],MINI_SIGNUP_FOOTER_MESSAGE_SEARCH:["¡Únete a Flickr para ver más fotos de ","${query}","!"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-mobile-app-upsell",function(n,t){var e=n.Template.Handlebars.revive({1:function(n,t,e,a,s){return"is-android"},3:function(n,t,e,a,s){return"http://play.google.com/store/apps/details?id=com.yahoo.mobile.client.android.flickr"},5:function(n,t,e,a,s){return"http://appstore.com/flickr"},7:function(n,t,e,a,s){return"\t\t\t\t\t"+n.escapeExpression((e.intlMessage||t&&t.intlMessage||e.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"mobile.APP_ANDROID"},data:s}))+"\n"},9:function(n,t,e,a,s){return"\t\t\t\t\t"+n.escapeExpression((e.intlMessage||t&&t.intlMessage||e.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"mobile.APP_IOS"},data:s}))+"\n"},11:function(n,t,e,a,s){return"\t\t\t\t\t"+n.escapeExpression((e.intlMessage||t&&t.intlMessage||e.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"mobile.APP_ANDROID_FREE"},data:s}))+"\n"},13:function(n,t,e,a,s){return"\t\t\t\t\t"+n.escapeExpression((e.intlMessage||t&&t.intlMessage||e.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"mobile.APP_IOS_FREE"},data:s}))+"\n"},15:function(n,t,e,a,s){return"\t\t\t\t\t"+n.escapeExpression((e.intlMessage||t&&t.intlMessage||e.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"mobile.INSTALL"},data:s}))+"\n"},17:function(n,t,e,a,s){return"\t\t\t\t\t"+n.escapeExpression((e.intlMessage||t&&t.intlMessage||e.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"mobile.GET"},data:s}))+"\n"},compiler:[7,">= 4.0.0"],main:function(n,t,e,a,s){var l,i=null!=t?t:{};return'<div id="smartbanner" class="ios">\n\t\x3c!-- <button class="sb-close close-banner"></button> --\x3e\n\t<div class="sb-container">\n\t\t<span class="sb-icon">\n\t\t\t<svg class="close-banner icon icon-close"><use xlink:href="#icon-close"></use></svg>\n\t\t</span>\n\t\t<span class="sb-flickr-icon">\n\t\t\t<div class="outer-logo '+(null!=(l=e.if.call(i,null!=t?t.isAndroid:t,{name:"if",hash:{},fn:n.program(1,s,0),inverse:n.noop,data:s}))?l:"")+'">\n\t\t\t\t<div class="ball blue-ball"></div>\n\t\t\t\t<div class="ball pink-ball"></div>\n\t\t\t</div>\n\t\t</span>\n\t\t<div class="sb-info">\n\t\t\t<a class="sb-button" href="'+(null!=(l=e.if.call(i,null!=t?t.isAndroid:t,{name:"if",hash:{},fn:n.program(3,s,0),inverse:n.noop,data:s}))?l:"")+(null!=(l=e.if.call(i,null!=t?t.isIOS:t,{name:"if",hash:{},fn:n.program(5,s,0),inverse:n.noop,data:s}))?l:"")+'">\n\t\t\t\t<strong>\n'+(null!=(l=e.if.call(i,null!=t?t.isAndroid:t,{name:"if",hash:{},fn:n.program(7,s,0),inverse:n.noop,data:s}))?l:"")+(null!=(l=e.if.call(i,null!=t?t.isIOS:t,{name:"if",hash:{},fn:n.program(9,s,0),inverse:n.noop,data:s}))?l:"")+"\t\t\t\t</strong>\n\t\t\t\t<span>\n"+(null!=(l=e.if.call(i,null!=t?t.isAndroid:t,{name:"if",hash:{},fn:n.program(11,s,0),inverse:n.program(13,s,0),data:s}))?l:"")+'\t\t\t\t</span>\n\t\t\t</a>\n\t\t</div>\n\t\t<div class="sb-view get-app">\n\t\t\t<span>\n'+(null!=(l=e.if.call(i,null!=t?t.isAndroid:t,{name:"if",hash:{},fn:n.program(15,s,0),inverse:n.noop,data:s}))?l:"")+(null!=(l=e.if.call(i,null!=t?t.isIOS:t,{name:"if",hash:{},fn:n.program(17,s,0),inverse:n.noop,data:s}))?l:"")+"\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>\n"},useData:!0}),a={};n.Array.each([],function(t){var e=n.Template.get("hermes/"+t);e&&(a[t]=e)}),n.Template.register("hermes/mobile-app-upsell",function(t,s){return s=s||{},s.partials=s.partials?n.merge(a,s.partials):a,e(t,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("mobile-app-upsell-view",function(e){e.namespace("Views")[this.name]=e.Base.create("mobile-app-upsell-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.photoId=e.photoId,this.buildContainer(),this},buildContainer:function(){var e=this.appContext.getUA().os;return this.setContainerWithTemplate("mobile-app-upsell",{isAndroid:"android"===e,isIOS:"ios"===e}),this},setRootViewAdditionalViewClasses:function(){var e=[],i=this.appContext.getUA().os;return e.push(i),e.push("show-upsell-banner"),this.set("rootViewAdditionalViewClasses",e),this},activate:function(){var i=this.get("container"),t=i.one(".close-banner"),n=i.one(".get-app");return t&&this.registerEventHandler(this.addBannerEvent(t,"dism",this.dismissBanner.bind(this))),n&&this.registerEventHandler(this.addBannerEvent(n,"inst",this.installApp.bind(this))),e.rapidTracker.beacon(this.name,"app_promo_interstitial_shown",{section:"app-interstitial"}),this},addBannerEvent:function(e,i,t){var n=this;return e.on("click",function(e){e.preventDefault(),n.appContext.setCookie({cookieName:i,path:"/",cookieValue:!0,remove:!0}),n.fire("subviewViewEvent","removeUpsell"),t()})},dismissBanner:function(){if(navigator.cookieEnabled){var i=parseInt(this.appContext.getCookie("flaidisn"),10);!i||isNaN(i)?i=0:i+=1,e.rapidTracker.beacon(this.name,"app_promo_interstitial_dismissed"+(i>0?"_"+(i+1):""),{section:"app-interstitial"});var t;i<2?t=e.moment().add(3,"days").toDate():2===i?t=e.moment().add(7,"days").toDate():3===i&&(t=e.moment().add(20,"year").toDate()),this.appContext.setCookie({cookieName:"flaidisn",cookieValue:1,expires:t,remove:!0,path:"/"})}else e.rapidTracker.beacon(this.name,"cookies_off",{section:"app-interstitial"})},installApp:function(){var i=this.appContext.getUA().os,t=this.appContext.getUA().isWebview,n="photos/"+this.nsid+"/"+this.photoId,a=this;e.rapidTracker.beacon(this.name,"app_promo_interstitial_download",{section:"app-interstitial"}),this.appContext.setCookie({cookieName:"flaidis",cookieValue:1,expires:e.moment().add(20,"year").toDate(),remove:!0,path:"/"}),setTimeout(function(){e.use("mobile-actions-helper",function(e){e.MobileActionsHelper.redirectToAppOrStore({os:i,isWebview:t,pageURL:n,beacon:{name:"app_promo_banner_open",section:"appbanner"},viewName:a.name})})},250)}},{ATTRS:{}}),e.namespace("Views")[this.name].shouldShowBanner=function(e){var i=e.getCookie("dism")||e.getCookie("inst"),t=e.getUA().os;return!i&&"android"===t}},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-mobile-app-upsell"],langBundles:["common","mobile"]});YUI.add("hermes-lang-mobile_es-us",function(e,a){e.Intl.add("hermes/mobile","es-US",{APP_IOS:["Flickr para iOS"],APP_ANDROID:["Flickr para Android"],APP_IOS_FREE:["Gratuita en la App Store"],APP_ANDROID_FREE:["Gratuita en Google Play"],GET:["Obtener"],INSTALL:["Instalar"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-partner-account-banner",function(e,a){var r=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,r,n,t){return'<div class="banner-container">\n\t<p>Dear Flickr Member: due to partnership changes with AT&T, you need to update your primary email address. <a class="learn-more">Learn more</a></p>\n</div>\n'},useData:!0}),n={};e.Array.each([],function(a){var r=e.Template.get("hermes/"+a);r&&(n[a]=r)}),e.Template.register("hermes/partner-account-banner",function(a,t){return t=t||{},t.partials=t.partials?e.merge(n,t.partials):n,r(a,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-partner-account-modal",function(e,t){var a=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,r){return'<div>\n\tWith the launch of the new att.net homepage on June 30, 2017, you will need to change the primary email address you use to sign into your Flickr/Yahoo account. Your data and photos on Flickr will not be deleted or modified in any way. You will need to complete this process before June 30, 2017 in order to continue accessing your Flickr account.\n\t<br/><br/>\n\t<a href="/partner-account">Click here to learn more about these changes.</a>\n\t<br/><br/>\n\t<a href="/account/transfer">\n\t\t<button class="update-email">Update your email address</button>\n\t</a>\n</div>\n'},useData:!0}),n={};e.Array.each([],function(t){var a=e.Template.get("hermes/"+t);a&&(n[t]=a)}),e.Template.register("hermes/partner-account-modal",function(t,r){return r=r||{},r.partials=r.partials?e.merge(n,r.partials):n,a(t,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("partner-account-banner-view",function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{buildContainer:function(){return this.setContainerWithTemplate("partner-account-banner"),this},activate:function(){var n=this.get("container").one(".learn-more");return n&&this.registerEventHandler(n.on("click",this.openModal.bind(this))),e.AnchorRepositioner.addOffset(t,this.get("container")),this},openModal:function(){new e.Views.FluidModal({title:"The way you sign in to Flickr is changing",htmlMessage:this.templates("partner-account-modal")({}),appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelX:!0,showCancelButton:!1,showActionButton:!1,hideModalOverlay:!1,showFooter:!1}).show()},destructor:function(){e.AnchorRepositioner.removeOffset(t)}})},"@VERSION@",{requires:["flickr-view","hermes-template-partner-account-banner","hermes-template-partner-account-modal"]});